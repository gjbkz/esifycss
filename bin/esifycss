#!/usr/bin/env node

const esifycss = require('..');
const console = require('console');
const program = require('commander');
const packageData = require('../package.json');

program
.version(packageData.version)
.usage('[options] <patterns ...>')
.option('--config <path>', 'A path to configuration files.', String)
.option('--dest <path>', 'A path to concatenated css.', String)
.option('--watch', 'Watch files and update module automatically.', Boolean)
.option('--mangle', 'Minify classnames for production build.', Boolean)
.option('--ext <string>', 'An extension of generated modules.', String)
.option('--baseDir <path>', 'A path which is used to generate modules to outputDir.', String)
.option('--outputDir <path>', 'A path to a directory where modules are generated.', String)
.option('--classesOnly', 'If it is true, a CSS file exports classes as default export. Otherwise, {classes, properties} is exported.', Boolean)
.parse(process.argv);

program.patterns = program.args;
esifycss[program.watch ? 'watch' : 'start'](program)
.catch((error) => {
    console.error(error);
    process.exit(1);
});
