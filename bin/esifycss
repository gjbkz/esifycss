#!/usr/bin/env node

const esifycss = require('..');
const console = require('console');
const program = require('commander');
const packageData = require('../package.json');

program
.version(packageData.version)
.usage('[options] <patterns ...>')
.option('-c, --config <path>', 'Path to configuration files', String)
.option('-d, --dest <path>', 'Path to output concatenated css', String)
.option('-w, --watch', 'Watch files and update definitions automatically')
.option('-m, --mangle', 'Minify classnames for production build')
.parse(process.argv);

program.patterns = program.args;
esifycss[program.watch ? 'watch' : 'start'](program)
.catch((error) => {
    console.error(error);
    process.exit(1);
});
